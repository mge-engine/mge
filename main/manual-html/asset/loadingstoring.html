

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asset Loading and Storing &mdash; MGE 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=e486641d" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Asset Tool" href="assettool.html" />
    <link rel="prev" title="Asset Management" href="asset.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MGE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../reference.html">Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../reference.html#libraries">Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../mgecore.html">Core Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgemath.html">Mathematics Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgegraphics.html">Graphics Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgeinput.html">Input Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgeapplication.html">Application Library</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../mgeasset.html">Asset Library</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="asset.html">Asset Management</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Asset Loading and Storing</a></li>
<li class="toctree-l4"><a class="reference internal" href="assettool.html">Asset Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference.html#example-programs">Example Programs</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MIT License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MGE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../reference.html">Reference</a></li>
          <li class="breadcrumb-item"><a href="../mgeasset.html">Asset Library</a></li>
      <li class="breadcrumb-item active">Asset Loading and Storing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/asset/loadingstoring.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="asset-loading-and-storing">
<h1>Asset Loading and Storing<a class="headerlink" href="#asset-loading-and-storing" title="Link to this heading"></a></h1>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>Assets are identified by a path, which is used to look up the asset in a
virtual filesystem managed by the asset subsystem.</p>
<p>Asset access factories are mounted at specific directories and are responsible
for loading assets having paths that start with the directory they are mounted.</p>
<section id="configuration-file">
<h3>Configuration File<a class="headerlink" href="#configuration-file" title="Link to this heading"></a></h3>
<p>The asset subsystem is configured in the executable configuration under the
<code class="docutils literal notranslate"><span class="pre">asset</span></code> section, using the <code class="docutils literal notranslate"><span class="pre">repositories</span></code> parameter which manages a list
of mounted asset repositories.</p>
<p>The configuration is read from the application’s JSON configuration file and
can be dynamically updated at runtime through the configuration system.</p>
<section id="required-repository-properties">
<h4>Required Repository Properties<a class="headerlink" href="#required-repository-properties" title="Link to this heading"></a></h4>
<p>Each repository entry must specify:</p>
<dl class="simple">
<dt>type</dt><dd><p>The type defines the factory used to load the assets (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;file&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;zip&quot;</span></code>).</p>
</dd>
<dt>mount_point</dt><dd><p>The virtual path where the asset repository is mounted (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;/assets&quot;</span></code>).</p>
</dd>
</dl>
</section>
<section id="optional-repository-properties">
<h4>Optional Repository Properties<a class="headerlink" href="#optional-repository-properties" title="Link to this heading"></a></h4>
<dl class="simple">
<dt>mode</dt><dd><p>Access mode for the repository. Valid values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> - Read-only access (default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> - Write-only access</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;rw&quot;</span></code> - Read-write access</p></li>
</ul>
</dd>
</dl>
</section>
<section id="type-specific-properties">
<h4>Type-Specific Properties<a class="headerlink" href="#type-specific-properties" title="Link to this heading"></a></h4>
<p>Additional properties specific to each repository type can be specified.
These properties are passed to the asset source implementation during
configuration.</p>
<dl class="simple">
<dt>For <code class="docutils literal notranslate"><span class="pre">file</span></code> type:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">directory</span></code> - Filesystem path to the directory containing assets</p>
</dd>
<dt>For <code class="docutils literal notranslate"><span class="pre">zip</span></code> type:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">file</span></code> - Path to the ZIP archive file</p>
</dd>
</dl>
</section>
<section id="configuration-example">
<h4>Configuration Example<a class="headerlink" href="#configuration-example" title="Link to this heading"></a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;asset&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;repositories&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mount_point&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;directory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mount_point&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/assets&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;directory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;file&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mount_point&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/temp&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rw&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;directory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/tmp/game_assets&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zip&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;mount_point&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/zipassets&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;assets.zip&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="dynamic-reconfiguration">
<h4>Dynamic Reconfiguration<a class="headerlink" href="#dynamic-reconfiguration" title="Link to this heading"></a></h4>
<p>The asset configuration supports dynamic updates through the configuration
system’s change handler mechanism. When the <code class="docutils literal notranslate"><span class="pre">asset.repositories</span></code> parameter
is modified, the mount table is automatically reconfigured:</p>
<ul class="simple">
<li><p>Unchanged mount points are preserved</p></li>
<li><p>Modified mount points are remounted with new settings</p></li>
<li><p>Removed mount points are automatically unmounted</p></li>
</ul>
<p>This allows runtime modification of asset sources without restarting the
application.</p>
<p>The configuration parameter can be accessed programmatically:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;mge/core/configuration.hpp&quot;</span>

<span class="c1">// Access the repositories parameter</span>
<span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MGE_PARAMETER</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span><span class="w"> </span><span class="n">repositories</span><span class="p">);</span>

<span class="c1">// Modification triggers automatic reconfiguration</span>
<span class="c1">// through the registered change handler</span>
</pre></div>
</div>
</section>
<section id="configuration-validation">
<h4>Configuration Validation<a class="headerlink" href="#configuration-validation" title="Link to this heading"></a></h4>
<p>The asset configuration system validates repository entries during loading:</p>
<ul class="simple">
<li><p><strong>Missing required properties</strong>: Repository entries without <code class="docutils literal notranslate"><span class="pre">mount_point</span></code>
or <code class="docutils literal notranslate"><span class="pre">type</span></code> are logged as errors and skipped.</p></li>
<li><p><strong>Invalid access mode</strong>: An invalid <code class="docutils literal notranslate"><span class="pre">mode</span></code> value throws an <code class="docutils literal notranslate"><span class="pre">illegal_argument</span></code>
exception. Valid values are <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;rw&quot;</span></code>.</p></li>
<li><p><strong>Invalid type</strong>: Attempting to mount an unknown asset source type throws
an <code class="docutils literal notranslate"><span class="pre">illegal_state</span></code> exception.</p></li>
</ul>
<p>Error messages are logged through the <code class="docutils literal notranslate"><span class="pre">ASSET</span></code> trace topic. Enable asset
tracing to diagnose configuration issues:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Windows PowerShell</span>
<span class="nv">$env</span>:MGE_TRACE_ENABLED<span class="o">=</span><span class="m">1</span>
<span class="nv">$env</span>:MGE_TRACE_TOPIC_ASSET<span class="o">=</span><span class="m">1</span>
<span class="nv">$env</span>:MGE_TRACE_TO_STDOUT<span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="path-resolution">
<h4>Path Resolution<a class="headerlink" href="#path-resolution" title="Link to this heading"></a></h4>
<p>When an asset is accessed by path, the mount table resolves it to the
appropriate asset source using the following algorithm:</p>
<ol class="arabic simple">
<li><p>Find the longest mount point that is a prefix of the requested asset path</p></li>
<li><p>Check that the access mode is compatible with the requested operation
(load requires READ or READ_WRITE, store requires WRITE or READ_WRITE)</p></li>
<li><p>Delegate to the matched asset source’s <code class="docutils literal notranslate"><span class="pre">access()</span></code> method</p></li>
</ol>
<p>For example, with mount points <code class="docutils literal notranslate"><span class="pre">/</span></code> and <code class="docutils literal notranslate"><span class="pre">/assets/textures</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/assets/textures/brick.png</span></code> → uses <code class="docutils literal notranslate"><span class="pre">/assets/textures</span></code> mount</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/assets/models/box.obj</span></code> → uses <code class="docutils literal notranslate"><span class="pre">/</span></code> mount</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/config.json</span></code> → uses <code class="docutils literal notranslate"><span class="pre">/</span></code> mount</p></li>
</ul>
<p>This allows hierarchical organization of asset sources with more specific
mount points taking precedence over general ones.</p>
</section>
</section>
</section>
<section id="supported-asset-sources">
<h2>Supported Asset Sources<a class="headerlink" href="#supported-asset-sources" title="Link to this heading"></a></h2>
<p>The following asset sources are built into the asset subsystem:</p>
<section id="file-asset-source">
<h3>File Asset Source<a class="headerlink" href="#file-asset-source" title="Link to this heading"></a></h3>
<p>The file asset source loads assets from the filesystem. It is configured with
the following properties:</p>
<dl class="simple">
<dt>directory</dt><dd><p>The directory from which to load assets.</p>
</dd>
</dl>
<section id="access-mode">
<h4>Access Mode<a class="headerlink" href="#access-mode" title="Link to this heading"></a></h4>
<p>Asset sources can be mounted in different access modes:</p>
<dl class="simple">
<dt>READ</dt><dd><p>Read-only access to assets (default).</p>
</dd>
<dt>WRITE</dt><dd><p>Write-only access (for storing assets).</p>
</dd>
<dt>READ_WRITE</dt><dd><p>Both reading and writing allowed.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">mge</span><span class="o">::</span><span class="n">properties</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<span class="n">p</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;directory&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./assets&quot;</span><span class="p">);</span>

<span class="c1">// Mount read-only (default)</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">mount</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>

<span class="c1">// Mount with read-write access</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">mount</span><span class="p">(</span><span class="s">&quot;/temp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="n">mge</span><span class="o">::</span><span class="n">asset_source</span><span class="o">::</span><span class="n">access_mode</span><span class="o">::</span><span class="n">READ_WRITE</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="zip-asset-source">
<h3>Zip Asset Source<a class="headerlink" href="#zip-asset-source" title="Link to this heading"></a></h3>
<p>The zip asset source loads assets from a zip file. It is configured with the
following properties:</p>
<dl class="simple">
<dt>file</dt><dd><p>The zip file from which to load assets.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zip asset source implementation status may vary. Check source code for
current availability.</p>
</div>
</section>
</section>
<section id="implementing-an-asset-source">
<h2>Implementing an Asset Source<a class="headerlink" href="#implementing-an-asset-source" title="Link to this heading"></a></h2>
<p>To implement a new asset source, you need to create a class that implements
the <cite>asset_source</cite> interface and register it as a component.</p>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_sourceE">
<span id="_CPPv3N3mge12asset_sourceE"></span><span id="_CPPv2N3mge12asset_sourceE"></span><span id="mge::asset_source"></span><span class="target" id="classmge_1_1asset__source"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">asset_source</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">component</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N3mge12asset_sourceE" title="mge::asset_source"><span class="n"><span class="pre">asset_source</span></span></a><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_sourceE" title="Link to this definition"></a><br /></dt>
<dd><p>An asset access factory. </p>
<p>An asset access factory is ‘mounted’ below a specific path, and serves all assets that are looked for beneath this path. </p>
<p>Subclassed by mge::file_asset_source</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp enum-class">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source11access_modeE">
<span id="_CPPv3N3mge12asset_source11access_modeE"></span><span id="_CPPv2N3mge12asset_source11access_modeE"></span><span class="target" id="classmge_1_1asset__source_1a72f32ef5ef250e1190996eb92d566096"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">access_mode</span></span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source11access_modeE" title="Link to this definition"></a><br /></dt>
<dd><p>Access mode for the asset source. An asset source may be opened in read, write or read-write mode, or the nature of the asset source may restrict access to read-only. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source11access_mode4READE">
<span id="_CPPv3N3mge12asset_source11access_mode4READE"></span><span id="_CPPv2N3mge12asset_source11access_mode4READE"></span><span class="target" id="classmge_1_1asset__source_1a72f32ef5ef250e1190996eb92d566096a3466fab4975481651940ed328aa990e4"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">READ</span></span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source11access_mode4READE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source11access_mode5WRITEE">
<span id="_CPPv3N3mge12asset_source11access_mode5WRITEE"></span><span id="_CPPv2N3mge12asset_source11access_mode5WRITEE"></span><span class="target" id="classmge_1_1asset__source_1a72f32ef5ef250e1190996eb92d566096ad4b9e47f65b6e79b010582f15785867e"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">WRITE</span></span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source11access_mode5WRITEE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source11access_mode10READ_WRITEE">
<span id="_CPPv3N3mge12asset_source11access_mode10READ_WRITEE"></span><span id="_CPPv2N3mge12asset_source11access_mode10READ_WRITEE"></span><span class="target" id="classmge_1_1asset__source_1a72f32ef5ef250e1190996eb92d566096aa7b843fb734e3b3fea8e5f902d3f4144"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">READ_WRITE</span></span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source11access_mode10READ_WRITEE" title="Link to this definition"></a><br /></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source9configureERKN3mge10propertiesE">
<span id="_CPPv3N3mge12asset_source9configureERKN3mge10propertiesE"></span><span id="_CPPv2N3mge12asset_source9configureERKN3mge10propertiesE"></span><span id="mge::asset_source::configure__mge::propertiesCR"></span><span class="target" id="classmge_1_1asset__source_1a7bba78cddff88e21648d2d4085815eb0"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">configure</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../core/utilities.html#_CPPv4N3mge10propertiesE" title="mge::properties"><span class="n"><span class="pre">properties</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">p</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source9configureERKN3mge10propertiesE" title="Link to this definition"></a><br /></dt>
<dd><p>Configure factory. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>p</strong> – configuration properties </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_source13is_configuredEv">
<span id="_CPPv3NK3mge12asset_source13is_configuredEv"></span><span id="_CPPv2NK3mge12asset_source13is_configuredEv"></span><span id="mge::asset_source::is_configuredC"></span><span class="target" id="classmge_1_1asset__source_1acd7cc9c18752fae9af4cd97ebe0b5d29"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_configured</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_source13is_configuredEv" title="Link to this definition"></a><br /></dt>
<dd><p>Check whether factory is configured. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if configured </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source6accessERKN3mge4pathE">
<span id="_CPPv3N3mge12asset_source6accessERKN3mge4pathE"></span><span id="_CPPv2N3mge12asset_source6accessERKN3mge4pathE"></span><span id="mge::asset_source::access__mge::pathCR"></span><span class="target" id="classmge_1_1asset__source_1aaaf1190e6035a1e7d4d6f28c92c3dc13"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">asset_access_ref</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">access</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">path</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">p</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source6accessERKN3mge4pathE" title="Link to this definition"></a><br /></dt>
<dd><p>Resolve path into asset object. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>p</strong> – path, absolute (includes the mount point) </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>asset located at path </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source12asset_existsERKN3mge4pathE">
<span id="_CPPv3N3mge12asset_source12asset_existsERKN3mge4pathE"></span><span id="_CPPv2N3mge12asset_source12asset_existsERKN3mge4pathE"></span><span id="mge::asset_source::asset_exists__mge::pathCR"></span><span class="target" id="classmge_1_1asset__source_1ac2885f4e5a689c9aef0806512de13ece"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">asset_exists</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">path</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">p</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_source12asset_existsERKN3mge4pathE" title="Link to this definition"></a><br /></dt>
<dd><p>Check whether asset at given path exists. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>p</strong> – path </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>true if asset exists </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_source4gistERNSt14format_contextE">
<span id="_CPPv3NK3mge12asset_source4gistERNSt14format_contextE"></span><span id="_CPPv2NK3mge12asset_source4gistERNSt14format_contextE"></span><span id="mge::asset_source::gist__std::format_contextRC"></span><span class="target" id="classmge_1_1asset__source_1af820b545764bfb86bf723d0c17322568"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">gist</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">format_context</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">context</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_source4gistERNSt14format_contextE" title="Link to this definition"></a><br /></dt>
<dd><p>Get factory details. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> – format context </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source15set_mount_pointERKN3mge4pathE">
<span id="_CPPv3N3mge12asset_source15set_mount_pointERKN3mge4pathE"></span><span id="_CPPv2N3mge12asset_source15set_mount_pointERKN3mge4pathE"></span><span id="mge::asset_source::set_mount_point__mge::pathCR"></span><span class="target" id="classmge_1_1asset__source_1a5b8d5d14411e30f256477f6638ff7dcd"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_mount_point</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">path</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">mountpoint</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3mge12asset_source15set_mount_pointERKN3mge4pathE" title="Link to this definition"></a><br /></dt>
<dd><p>Set the mount point. </p>
<p>The mount point is a path prefix of all assets managed by this factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mountpoint</strong> – new mount point </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_source11mount_pointEv">
<span id="_CPPv3NK3mge12asset_source11mount_pointEv"></span><span id="_CPPv2NK3mge12asset_source11mount_pointEv"></span><span id="mge::asset_source::mount_pointC"></span><span class="target" id="classmge_1_1asset__source_1a1637961de364e31c3eb40c2bdc96aca6"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">path</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">mount_point</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_source11mount_pointEv" title="Link to this definition"></a><br /></dt>
<dd><p>Get current mount point. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>mount point </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_source8set_modeE11access_mode">
<span id="_CPPv3N3mge12asset_source8set_modeE11access_mode"></span><span id="_CPPv2N3mge12asset_source8set_modeE11access_mode"></span><span id="mge::asset_source::set_mode__access_mode"></span><span class="target" id="classmge_1_1asset__source_1acf7acfc3ac10921b551f3a9afa9a7ac4"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_mode</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N3mge12asset_source11access_modeE" title="mge::asset_source::access_mode"><span class="n"><span class="pre">access_mode</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">mode</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N3mge12asset_source8set_modeE11access_mode" title="Link to this definition"></a><br /></dt>
<dd><p>Set access mode for this asset source. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mode</strong> – access mode </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_source4modeEv">
<span id="_CPPv3NK3mge12asset_source4modeEv"></span><span id="_CPPv2NK3mge12asset_source4modeEv"></span><span id="mge::asset_source::modeC"></span><span class="target" id="classmge_1_1asset__source_1a0e0d2531875b9047e390a3214c7ded4c"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3mge12asset_source11access_modeE" title="mge::asset_source::access_mode"><span class="n"><span class="pre">access_mode</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mode</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">noexcept</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_source4modeEv" title="Link to this definition"></a><br /></dt>
<dd><p>Get current access mode. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>access mode </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<p>Furthermore, you need to implement the <cite>asset_access</cite> interface for an individual
asset.</p>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_accessE">
<span id="_CPPv3N3mge12asset_accessE"></span><span id="_CPPv2N3mge12asset_accessE"></span><span id="mge::asset_access"></span><span class="target" id="classmge_1_1asset__access"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">asset_access</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../core/utilities.html#_CPPv4N3mge11noncopyableE" title="mge::noncopyable"><span class="n"><span class="pre">noncopyable</span></span></a><a class="headerlink" href="#_CPPv4N3mge12asset_accessE" title="Link to this definition"></a><br /></dt>
<dd><p>Access to an asset. </p>
<p>An asset access factory creates instances of this interface which implement the actual properties of an asset. </p>
<p>Subclassed by mge::file_asset_access</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_access4sizeEv">
<span id="_CPPv3NK3mge12asset_access4sizeEv"></span><span id="_CPPv2NK3mge12asset_access4sizeEv"></span><span id="mge::asset_access::sizeC"></span><span class="target" id="classmge_1_1asset__access_1a0e0163cf55ebf0756819a5e29ae2154b"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">size</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_access4sizeEv" title="Link to this definition"></a><br /></dt>
<dd><p>Total size of asset data, in bytes. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>asset size </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_access4dataEv">
<span id="_CPPv3NK3mge12asset_access4dataEv"></span><span id="_CPPv2NK3mge12asset_access4dataEv"></span><span id="mge::asset_access::dataC"></span><span class="target" id="classmge_1_1asset__access_1abd00bf061c89bbed150fd0f8b774d21c"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">input_stream_ref</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">data</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_access4dataEv" title="Link to this definition"></a><br /></dt>
<dd><p>Asset data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>input stream of asset data </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_access4typeEv">
<span id="_CPPv3NK3mge12asset_access4typeEv"></span><span id="_CPPv2NK3mge12asset_access4typeEv"></span><span id="mge::asset_access::typeC"></span><span class="target" id="classmge_1_1asset__access_1a1dd8a17b50fb52db7f8ada0c5655849f"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">type</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_access4typeEv" title="Link to this definition"></a><br /></dt>
<dd><p>Asset type. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>asset type </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_access14has_propertiesEv">
<span id="_CPPv3NK3mge12asset_access14has_propertiesEv"></span><span id="_CPPv2NK3mge12asset_access14has_propertiesEv"></span><span id="mge::asset_access::has_propertiesC"></span><span class="target" id="classmge_1_1asset__access_1a3b17712882a150cfc8159f74eb279545"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">has_properties</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_access14has_propertiesEv" title="Link to this definition"></a><br /></dt>
<dd><p>Get whether the asset has properties. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the asset has properties </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge12asset_access10propertiesEv">
<span id="_CPPv3NK3mge12asset_access10propertiesEv"></span><span id="_CPPv2NK3mge12asset_access10propertiesEv"></span><span id="mge::asset_access::propertiesC"></span><span class="target" id="classmge_1_1asset__access_1ac628f59e48e8f70b7c3a6669aa979fc5"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">properties_ref</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">properties</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge12asset_access10propertiesEv" title="Link to this definition"></a><br /></dt>
<dd><p>Asset properties. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>properties </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_access13output_streamEv">
<span id="_CPPv3N3mge12asset_access13output_streamEv"></span><span id="_CPPv2N3mge12asset_access13output_streamEv"></span><span id="mge::asset_access::output_stream"></span><span class="target" id="classmge_1_1asset__access_1a06e993770fc14f1961c49ecda082493a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">output_stream_ref</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">output_stream</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_access13output_streamEv" title="Link to this definition"></a><br /></dt>
<dd><p>Output stream to write asset data. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>output stream </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge12asset_access16store_propertiesERKN3mge10propertiesE">
<span id="_CPPv3N3mge12asset_access16store_propertiesERKN3mge10propertiesE"></span><span id="_CPPv2N3mge12asset_access16store_propertiesERKN3mge10propertiesE"></span><span id="mge::asset_access::store_properties__mge::propertiesCR"></span><span class="target" id="classmge_1_1asset__access_1adb37bebb8cafd99b2415d31eb7eb5011"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">store_properties</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../core/utilities.html#_CPPv4N3mge10propertiesE" title="mge::properties"><span class="n"><span class="pre">properties</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">props</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge12asset_access16store_propertiesERKN3mge10propertiesE" title="Link to this definition"></a><br /></dt>
<dd><p>Store properties. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>props</strong> – properties to store </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="asset-handlers">
<h2>Asset Handlers<a class="headerlink" href="#asset-handlers" title="Link to this heading"></a></h2>
<p>Asset handlers are responsible for loading and storing assets from and to their
respective sources. They are implemented as classes that inherit from
the <cite>asset_handler</cite> interface. Different asset handlers that handle the same
type for load and store can be registered independently.</p>
<p>One asset handler handles a number of types of assets, such as images, meshes,
shaders, etc. The asset handler is responsible for loading the asset data into
memory and providing an interface to access the loaded asset, and to store an
object in a a specific format back to the asset.</p>
<p>In addition, an asset handler can be used also to improve a generic asset type
like e.g. ‘text/plain’ by providing a more specific type, such as ‘model/obj’
by further inspection of the asset data.</p>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N3mge13asset_handlerE">
<span id="_CPPv3N3mge13asset_handlerE"></span><span id="_CPPv2N3mge13asset_handlerE"></span><span id="mge::asset_handler"></span><span class="target" id="classmge_1_1asset__handler"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">asset_handler</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">mge</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">component</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N3mge13asset_handlerE" title="mge::asset_handler"><span class="n"><span class="pre">asset_handler</span></span></a><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N3mge13asset_handlerE" title="Link to this definition"></a><br /></dt>
<dd><p>Interface for asset handlers. </p>
<p>An asset handler is responsible for loading an asset. Assets can be loaded as raw streams, but usually one wants to load an asset in a structured way, e.g. as a image, a mesh, a shader etc. </p>
<p>Subclassed by mge::application_octet_stream_handler</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge13asset_handler4loadERK5asset">
<span id="_CPPv3N3mge13asset_handler4loadERK5asset"></span><span id="_CPPv2N3mge13asset_handler4loadERK5asset"></span><span id="mge::asset_handler::load__assetCR"></span><span class="target" id="classmge_1_1asset__handler_1aec2944c8d4ddbb5f09ee4f3e52fb80eb"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">any</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">load</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3mge13asset_handler4loadERK5asset" title="mge::asset_handler::load::asset"><span class="n"><span class="pre">asset</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">asset</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge13asset_handler4loadERK5asset" title="Link to this definition"></a><br /></dt>
<dd><p>Loads the asset. </p>
<p>This constructs the loaded asset from the input stream and properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>asset</strong> – asset that is loaded </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>std::any loaded asset </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N3mge13asset_handler5storeERK5assetRK10asset_typeRKNSt3anyE">
<span id="_CPPv3N3mge13asset_handler5storeERK5assetRK10asset_typeRKNSt3anyE"></span><span id="_CPPv2N3mge13asset_handler5storeERK5assetRK10asset_typeRKNSt3anyE"></span><span id="mge::asset_handler::store__assetCR.asset_typeCR.std::anyCR"></span><span class="target" id="classmge_1_1asset__handler_1ae5544e59314a011a58d6abadf44d8a00"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">store</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N3mge13asset_handler5storeERK5assetRK10asset_typeRKNSt3anyE" title="mge::asset_handler::store::asset"><span class="n"><span class="pre">asset</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">asset</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">type</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">any</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">data</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N3mge13asset_handler5storeERK5assetRK10asset_typeRKNSt3anyE" title="Link to this definition"></a><br /></dt>
<dd><p>Stores the asset. </p>
<p>This writes the asset to the output stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> – asset that is stored </p></li>
<li><p><strong>type</strong> – asset type </p></li>
<li><p><strong>data</strong> – asset data to store </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge13asset_handler13handled_typesE14operation_type">
<span id="_CPPv3NK3mge13asset_handler13handled_typesE14operation_type"></span><span id="_CPPv2NK3mge13asset_handler13handled_typesE14operation_type"></span><span id="mge::asset_handler::handled_types__operation_typeC"></span><span class="target" id="classmge_1_1asset__handler_1aeea91d736d3714320c46abf6f45a6ee5"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">span</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">handled_types</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">operation_type</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">t</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4NK3mge13asset_handler13handled_typesE14operation_type" title="Link to this definition"></a><br /></dt>
<dd><p>Return asset types handled by this handler. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> – operation type (load or store) </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>asset types handled by this handler </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge13asset_handler11can_improveERK5assetRK10asset_type">
<span id="_CPPv3NK3mge13asset_handler11can_improveERK5assetRK10asset_type"></span><span id="_CPPv2NK3mge13asset_handler11can_improveERK5assetRK10asset_type"></span><span id="mge::asset_handler::can_improve__assetCR.asset_typeCRC"></span><span class="target" id="classmge_1_1asset__handler_1ac2e0daab8d35c3a1bfc8647af2e04df7"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">can_improve</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4NK3mge13asset_handler11can_improveERK5assetRK10asset_type" title="mge::asset_handler::can_improve::asset"><span class="n"><span class="pre">asset</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">asset</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">type</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3mge13asset_handler11can_improveERK5assetRK10asset_type" title="Link to this definition"></a><br /></dt>
<dd><p>Return whether this handler can improve the asset type. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> – asset to be checked, type stored in asset is unreliable </p></li>
<li><p><strong>type</strong> – prelimary type of the asset, usually a common type</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">true</span></code> if this handler can improve the asset type, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK3mge13asset_handler7improveERK5assetRK10asset_type">
<span id="_CPPv3NK3mge13asset_handler7improveERK5assetRK10asset_type"></span><span id="_CPPv2NK3mge13asset_handler7improveERK5assetRK10asset_type"></span><span id="mge::asset_handler::improve__assetCR.asset_typeCRC"></span><span class="target" id="classmge_1_1asset__handler_1a43ebf75a83bd3060fad789e41f867ffe"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">improve</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4NK3mge13asset_handler7improveERK5assetRK10asset_type" title="mge::asset_handler::improve::asset"><span class="n"><span class="pre">asset</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">asset</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="asset.html#_CPPv4N3mge10asset_typeE" title="mge::asset_type"><span class="n"><span class="pre">asset_type</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">type</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK3mge13asset_handler7improveERK5assetRK10asset_type" title="Link to this definition"></a><br /></dt>
<dd><p>Improve the asset type. </p>
<p>This can be called if <code class="docutils literal notranslate"><span class="pre">can_improve</span></code> returns <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> – asset to be checked, type stored in asset is unreliable </p></li>
<li><p><strong>type</strong> – prelimary type of the asset, usually a common type</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>improved asset type, or <code class="docutils literal notranslate"><span class="pre">asset_type::UNKNOWN</span></code> if no improvement </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

<section id="built-in-asset-handlers">
<h3>Built-in Asset Handlers<a class="headerlink" href="#built-in-asset-handlers" title="Link to this heading"></a></h3>
<section id="octet-stream-handler">
<h4>Octet Stream Handler<a class="headerlink" href="#octet-stream-handler" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">application_octet_stream_handler</span></code> provides generic handling for binary
assets. It loads assets as raw byte buffers and is used as a fallback when no
more specific handler is available.</p>
<dl class="simple">
<dt>Handled types:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">application/octet-stream</span></code></p>
</dd>
<dt>Loaded as:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">std::shared_ptr&lt;mge::buffer&gt;</span></code></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">mge</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="w"> </span><span class="n">shader</span><span class="p">(</span><span class="s">&quot;/shaders/fragment.spv&quot;</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shader</span><span class="p">.</span><span class="n">load</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">mge</span><span class="o">::</span><span class="n">buffer</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="type-improvement">
<h4>Type Improvement<a class="headerlink" href="#type-improvement" title="Link to this heading"></a></h4>
<p>Asset handlers can improve generic asset types by inspecting the asset data.
For example, a generic <code class="docutils literal notranslate"><span class="pre">text/plain</span></code> type might be improved to <code class="docutils literal notranslate"><span class="pre">model/obj</span></code>
by checking for OBJ file markers.</p>
<p>The type improvement mechanism works as follows:</p>
<ol class="arabic simple">
<li><p>Asset source provides initial type (often via file extension or MIME magic)</p></li>
<li><p>Handlers are queried via <code class="docutils literal notranslate"><span class="pre">can_improve()</span></code> to see if they can refine the type</p></li>
<li><p>If a handler can improve the type, <code class="docutils literal notranslate"><span class="pre">improve()</span></code> is called to get the refined type</p></li>
</ol>
</section>
</section>
<section id="implementation-details">
<h3>Implementation Details<a class="headerlink" href="#implementation-details" title="Link to this heading"></a></h3>
<section id="type-detection">
<h4>Type Detection<a class="headerlink" href="#type-detection" title="Link to this heading"></a></h4>
<p>The asset library uses <code class="docutils literal notranslate"><span class="pre">libmagic</span></code> for automatic type detection based on file
content. This allows assets to be correctly identified even without relying on
file extensions.</p>
</section>
<section id="handler-registration">
<h4>Handler Registration<a class="headerlink" href="#handler-registration" title="Link to this heading"></a></h4>
<p>Asset handlers register themselves as component implementations:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">my_handler</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">mge</span><span class="o">::</span><span class="n">asset_handler</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Implementation...</span>
<span class="p">};</span>

<span class="n">MGE_REGISTER_IMPLEMENTATION</span><span class="p">(</span><span class="n">my_handler</span><span class="p">,</span><span class="w"> </span><span class="n">mge</span><span class="o">::</span><span class="n">asset_handler</span><span class="p">,</span><span class="w"> </span><span class="n">my_handler_id</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="practical-examples">
<h2>Practical Examples<a class="headerlink" href="#practical-examples" title="Link to this heading"></a></h2>
<section id="loading-assets">
<h3>Loading Assets<a class="headerlink" href="#loading-assets" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">mge</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="c1">// Load an image</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="w"> </span><span class="n">image_asset</span><span class="p">(</span><span class="s">&quot;/textures/brick.png&quot;</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">image_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">image_asset</span><span class="p">.</span><span class="n">load</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="n">mge</span><span class="o">::</span><span class="n">image_ref</span><span class="o">&gt;</span><span class="p">(</span><span class="n">image_data</span><span class="p">);</span>

<span class="c1">// Load a model</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="w"> </span><span class="n">model_asset</span><span class="p">(</span><span class="s">&quot;/models/teapot.obj&quot;</span><span class="p">);</span>
<span class="n">EXPECT_EQ</span><span class="p">(</span><span class="s">&quot;model/obj&quot;</span><span class="n">_at</span><span class="p">,</span><span class="w"> </span><span class="n">model_asset</span><span class="p">.</span><span class="n">type</span><span class="p">());</span>
<span class="k">auto</span><span class="w"> </span><span class="n">mesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">any_cast</span><span class="o">&lt;</span><span class="n">mge</span><span class="o">::</span><span class="n">mesh_ref</span><span class="o">&gt;</span><span class="p">(</span><span class="n">model_asset</span><span class="p">.</span><span class="n">load</span><span class="p">());</span>
</pre></div>
</div>
</section>
<section id="storing-assets">
<h3>Storing Assets<a class="headerlink" href="#storing-assets" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">mge</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="c1">// Create or modify an image</span>
<span class="n">mge</span><span class="o">::</span><span class="n">image_ref</span><span class="w"> </span><span class="n">my_image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_image</span><span class="p">();</span>

<span class="c1">// Store as PNG</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="w"> </span><span class="n">output</span><span class="p">(</span><span class="s">&quot;/output/result.png&quot;</span><span class="p">);</span>
<span class="n">output</span><span class="p">.</span><span class="n">store</span><span class="p">(</span><span class="s">&quot;image/png&quot;</span><span class="n">_at</span><span class="p">,</span><span class="w"> </span><span class="n">my_image</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="mounting-and-unmounting">
<h3>Mounting and Unmounting<a class="headerlink" href="#mounting-and-unmounting" title="Link to this heading"></a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Mount filesystem directory</span>
<span class="n">mge</span><span class="o">::</span><span class="n">properties</span><span class="w"> </span><span class="n">fs_props</span><span class="p">;</span>
<span class="n">fs_props</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;directory&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./game_assets&quot;</span><span class="p">);</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">mount</span><span class="p">(</span><span class="s">&quot;/game&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fs_props</span><span class="p">);</span>

<span class="c1">// Mount with write access</span>
<span class="n">mge</span><span class="o">::</span><span class="n">properties</span><span class="w"> </span><span class="n">temp_props</span><span class="p">;</span>
<span class="n">temp_props</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;directory&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">temp_directory_path</span><span class="p">().</span><span class="n">string</span><span class="p">());</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">mount</span><span class="p">(</span><span class="s">&quot;/temp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="n">mge</span><span class="o">::</span><span class="n">asset_source</span><span class="o">::</span><span class="n">access_mode</span><span class="o">::</span><span class="n">READ_WRITE</span><span class="p">,</span>
<span class="w">                  </span><span class="n">temp_props</span><span class="p">);</span>

<span class="c1">// Use assets</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="w"> </span><span class="n">level_data</span><span class="p">(</span><span class="s">&quot;/game/levels/level1.dat&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>

<span class="c1">// Clean up</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">unmount</span><span class="p">(</span><span class="s">&quot;/temp&quot;</span><span class="p">);</span>
<span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">unmount</span><span class="p">(</span><span class="s">&quot;/game&quot;</span><span class="p">);</span>
</pre></div>
</div>
<section id="programmatic-vs-configuration-file-mounting">
<h4>Programmatic vs. Configuration File Mounting<a class="headerlink" href="#programmatic-vs-configuration-file-mounting" title="Link to this heading"></a></h4>
<p>Asset sources can be mounted in two ways:</p>
<ol class="arabic simple">
<li><p><strong>Configuration file</strong>: Repositories listed in the <code class="docutils literal notranslate"><span class="pre">asset.repositories</span></code>
configuration parameter are automatically mounted at application startup
and can be dynamically reconfigured.</p></li>
<li><p><strong>Programmatic mounting</strong>: Using <code class="docutils literal notranslate"><span class="pre">mge::asset::mount()</span></code> and
<code class="docutils literal notranslate"><span class="pre">mge::asset::unmount()</span></code> provides runtime control over mount points,
useful for temporary asset sources or conditional mounting.</p></li>
</ol>
<p>Both methods can be used together. Programmatic mounts are independent of
the configuration file and persist until explicitly unmounted or until
application shutdown.</p>
</section>
</section>
<section id="locating-assets-by-name">
<h3>Locating Assets by Name<a class="headerlink" href="#locating-assets-by-name" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">locate()</span></code> method finds assets by name rather than explicit path,
useful for font families or other named resources:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">mge</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="c1">// Find a font by family name</span>
<span class="k">auto</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mge</span><span class="o">::</span><span class="n">asset</span><span class="o">::</span><span class="n">locate</span><span class="p">(</span><span class="s">&quot;Arial&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;font/truetype&quot;</span><span class="n">_at</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="asset.html" class="btn btn-neutral float-left" title="Asset Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="assettool.html" class="btn btn-neutral float-right" title="Asset Tool" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Alexander Schroeder.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>